name: backend-build
description: Build backend

inputs:
  variables-env:
    description: Variables in .env file
    required: true

runs:
  using: composite
  steps:
    - name: Install NestJS CLI
      run: |
        npm install -g @nestjs/cli
    
    - name: Build and run backend
      shell: bash
      run: |
        cd ./backend
        echo "${{ inputs.variables-env }}" > .production.env
        npm run build
        npm run start:prod
        cd ..
